<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="description" content="" />
    <link rel="icon" href="/TanatBlog/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css"
      integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB"
      crossorigin="anonymous"
    />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-4R1NVGZWSE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag('js', new Date());

      gtag('config', 'G-4R1NVGZWSE');
    </script>
    <meta http-equiv="content-security-policy" content=""><title>How I use Strapi as CMS for this blog.</title><meta name="description" content="Using Strapi to create blog posts api endpoints and host it on Heroku or Render" data-svelte="svelte-1n0hy1j">
	<link rel="stylesheet" href="/TanatBlog/_app/assets/pages/__layout.svelte-ab930616.css">
	<link rel="stylesheet" href="/TanatBlog/_app/assets/pages/blog/_slug_.svelte-1c148ef6.css">
	<link rel="modulepreload" href="/TanatBlog/_app/start-8f8df77d.js">
	<link rel="modulepreload" href="/TanatBlog/_app/chunks/index-f9833ff1.js">
	<link rel="modulepreload" href="/TanatBlog/_app/chunks/paths-396f020f.js">
	<link rel="modulepreload" href="/TanatBlog/_app/pages/__layout.svelte-db2e78be.js">
	<link rel="modulepreload" href="/TanatBlog/_app/chunks/stores-5a2e4d4b.js">
	<link rel="modulepreload" href="/TanatBlog/_app/pages/blog/_slug_.svelte-652a23ad.js">
  </head>
  <body>
    <div>


<div class="mx-auto mt-6 p-4 text-zinc-50 sm:max-w-3xl lg:p-2 3xl:max-w-7xl"><nav class="flex justify-between font-sans svelte-x7xvyt"><a href="/TanatBlog/" class="logo text3d text-5xl font-bold svelte-x7xvyt">TANAT</a>

  <div class="dropdown-link-container flex text-center text-xl font-light md:mt-4 md:space-x-4 svelte-x7xvyt"><a href="/TanatBlog/works" class="svelte-x7xvyt">Works
      </a><a href="/TanatBlog/about" class="svelte-x7xvyt">About
      </a><a href="/TanatBlog/contact" class="svelte-x7xvyt">Contact
      </a></div>

  <div class="bars mt-5 svelte-x7xvyt" aria-hidden="true"><svg width="30" preserveAspectRatio="none" viewBox="0 0 80 42" fill="none" xmlns="http://www.w3.org/2000/svg"><line x1="1" y1="1" x2="79" y2="1" stroke="white" stroke-width="3" stroke-linecap="round"></line><line x1="1" y1="41" x2="79" y2="41" stroke="white" stroke-width="3" stroke-linecap="round"></line><line x1="1" y1="21" x2="79" y2="21" stroke="white" stroke-width="3" stroke-linecap="round"></line></svg></div>
</nav>
  

<div class="mt-10"><div class="mb-10 sm:max-w-3xl 3xl:max-w-7xl"><h1 class="text-4xl font-bold leading-tight">How I use Strapi as CMS for this blog.</h1>
    <p class="mt-1 text-zinc-400">4 minutes read â€¢ Last updated
      <b>10 April 2022</b></p>
    <article class="mt-5 svelte-e1fbto"><!-- HTML_TAG_START --><p><em>Note: This blog is heavily inspired by <a href="https://strapi.io/blog/how-to-create-a-blog-with-svelte-kit-strapi">this blog post from strapi</a></em></p>
<p><br>
Today, I'll tell you how I manage articles for this blog using <a href="https://strapi.io/">Strapi</a> and hosting it via <a href="https://www.heroku.com/">Heroku</a> and <a href="https://render.com/">Render</a>.</p>
<h3>Prerequisite</h3>
<ul>
<li><a href="https://nodejs.org/en/">NodeJs</a> and <a href="https://www.npmjs.com/">NPM</a> installed on your machine.</li>
<li>Some basic JavaScript and <a href="https://strapi.io/">Strapi</a> knowledge.</li>
</ul>
<h3>Create Strapi Project</h3>
<p>Run this command on an empty folder to create a Strapi project called <code>cms</code> and wait for Strapi to create itself.</p>
<pre class="hljs"><code>npx create-strapi-app cms --quickstart
</code></pre>
<p>If Strapi hasn't run yet, use this command in <code>cms</code> folder.</p>
<pre class="hljs"><code>npm run develop
</code></pre>
<p>Now, Strapi should start on <a href="http://localhost:1337/">http://localhost:1337/</a> and show this signup page.</p>
<p><img src="https://i.imgur.com/SnHWxRI.png" alt="signup" width=50%> </img></p>
<p>Continue by signing up and we should get to the Admin page.</p>
<h4>Creating content types</h4>
<p>Find <code>Content-Type Builder</code> page and create new collection types <code>Post</code> with</p>
<ul>
<li>A <code>title</code> field with type <code>Text</code></li>
<li>A <code>description</code> field with type <code>Text</code> (<code>Short text</code> or <code>Long text</code> is up to you)</li>
<li>A <code>content</code> field with <code>Rich Text</code> type</li>
<li>A <code>slug</code> field with <code>UID</code> type and attached to <code>title</code></li>
</ul>
<p>We are using Strapi for our personal blog so no need for any <code>Relation</code> between user and article.<br>
<img src="https://i.imgur.com/V809v5X.png" alt="content types"></p>
<h4>Setting up roles and permissions</h4>
<p>First, find <code>Settings</code> button on sidebar then click on <code>Roles</code> in <code>USERS &amp; PERMISSIONS PLUGIN</code> section. Next, select <code>Public</code> role and edit permissions of <code>Post</code> to only allow <code>findOne</code> and <code>find</code>.<br>
<img src="https://i.imgur.com/0ybGQuN.png" alt="permisson"></p>
<p>After we finished setting up permissions, try adding some test data on <code>Content Manger</code>. Now, we should be able to use <a href="http://localhost:1337/api/post">http://localhost:1337/api/post</a>  and see the test data we put in.</p>
<h3>Hosting</h3>
<p>Strapi has a guide for many hosting platforms for you to select. (see. <a href="https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/deployment.html">Strapi Deployment</a>).</p>
<p>I have tried hosting on <a href="https://dashboard.heroku.com/">Heroku</a> and <a href="https://render.com/">Render</a> and I think both platforms is good to host a Strapi for our blog so I'll tell you how I host my Strapi with both platforms.</p>
<h4>Hosting on Heroku</h4>
<p>Just follow <a href="https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/deployment/hosting-guides/heroku.html#heroku-install-requirements">Strapi Heroku Deployment</a> and you should have Strapi up on Heroku server.</p>
<h4>Hosting on Render</h4>
<p>You can explore your options in this <a href="https://render.com/docs/deploy-strapi">article from Render</a>. For me, I'm going to use an &quot;Optimize for Cost and Simplicity&quot; option because it's simple, inexpensive and I think I don't need any scaling or zero downtime deploys thing. (<em>Note that if you want to try the same way with me, you need to at least pay for starter plan.</em>)<br>
<br>
<strong>Configuration steps.</strong></p>
<ol>
<li>Create Render Blueprint by creating file <code>render.yaml</code>.<pre class="hljs"><code><span class="hljs-comment"># ./render.yaml</span>
<span class="hljs-attr">services:</span>
  <span class="hljs-bullet">-</span> <span class="hljs-attr">type:</span> <span class="hljs-string">web</span>
    <span class="hljs-attr">name:</span> <span class="hljs-string">strapi</span>
    <span class="hljs-attr">env:</span> <span class="hljs-string">node</span>
    <span class="hljs-attr">region:</span> <span class="hljs-string">singapore</span> <span class="hljs-comment"># optional</span>
    <span class="hljs-attr">plan:</span> <span class="hljs-string">starter</span> <span class="hljs-comment"># need to be at least starter for persistent disk</span>
    <span class="hljs-attr">buildCommand:</span> <span class="hljs-string">npm</span> <span class="hljs-string">install</span> <span class="hljs-string">&amp;&amp;</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">build</span>
    <span class="hljs-attr">startCommand:</span> <span class="hljs-string">rsync</span> <span class="hljs-string">-a</span> <span class="hljs-string">public/</span> <span class="hljs-string">/data/public/</span> <span class="hljs-string">&amp;&amp;</span> <span class="hljs-string">npm</span> <span class="hljs-string">run</span> <span class="hljs-string">start</span>
    <span class="hljs-attr">healthCheckPath:</span> <span class="hljs-string">/_health</span>
    <span class="hljs-attr">disk:</span>
      <span class="hljs-attr">name:</span> <span class="hljs-string">strapi-data</span>
      <span class="hljs-attr">mountPath:</span> <span class="hljs-string">/data</span>
      <span class="hljs-attr">sizeGB:</span> <span class="hljs-number">1</span>
    <span class="hljs-attr">envVars:</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">NODE_VERSION</span>
        <span class="hljs-attr">value:</span> <span class="hljs-string">~16.13.0</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">NODE_ENV</span>
        <span class="hljs-attr">value:</span> <span class="hljs-string">production</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">DATABASE_FILENAME</span>
        <span class="hljs-attr">value:</span> <span class="hljs-string">/data/strapi.db</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">JWT_SECRET</span>
        <span class="hljs-attr">generateValue:</span> <span class="hljs-literal">true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">ADMIN_JWT_SECRET</span>
        <span class="hljs-attr">generateValue:</span> <span class="hljs-literal">true</span>
      <span class="hljs-bullet">-</span> <span class="hljs-attr">key:</span> <span class="hljs-string">APP_KEYS</span>
        <span class="hljs-attr">generateValue:</span> <span class="hljs-literal">true</span>
</code></pre>
In build and start command you can use yarn instead of npm, if you want.</li>
<li>Add <code>./config/env/production/server.js</code> file.<pre class="hljs"><code><span class="hljs-comment">// ./config/env/production/server.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">{ env }</span>) =&gt;</span> ({
	<span class="hljs-attr">url</span>: <span class="hljs-title function_">env</span>(<span class="hljs-string">&quot;RENDER_EXTERNAL_URL&quot;</span>),
	<span class="hljs-attr">dirs</span>: {
	<span class="hljs-attr">public</span>: <span class="hljs-string">&quot;/data/public&quot;</span>
	},
});
</code></pre>
</li>
<li>Edit <code>./config/database.js</code> file.<pre class="hljs"><code><span class="hljs-comment">// ./config/database.js</span>
<span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);

<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-function">(<span class="hljs-params">{ env }</span>) =&gt;</span> ({
  <span class="hljs-attr">connection</span>: {
    <span class="hljs-attr">client</span>: <span class="hljs-string">&#x27;sqlite&#x27;</span>,
    <span class="hljs-attr">connection</span>: {
	    <span class="hljs-comment">// filename: path.join(__dirname, &#x27;..&#x27;, env(&#x27;DATABASE_FILENAME&#x27;, &#x27;.tmp/data.db&#x27;)),</span>
	    <span class="hljs-attr">filename</span>: <span class="hljs-title function_">env</span>(<span class="hljs-string">&#x27;DATABASE_FILENAME&#x27;</span>, path.<span class="hljs-title function_">join</span>(__dirname, <span class="hljs-string">&#x27;..&#x27;</span>, <span class="hljs-string">&#x27;.tmp/data.db&#x27;</span>)),
    },
    <span class="hljs-attr">useNullAsDefault</span>: <span class="hljs-literal">true</span>,
  },
});

</code></pre>
</li>
<li>Push your changes to GitHub or GitLab and <a href="https://render.com/docs/infrastructure-as-code#getting-started">create an instance of your Blueprint</a> from the <a href="https://dashboard.render.com/">Render dashboard</a>.</li>
</ol>
<p>Finally, we should have Strapi up on Render server ready for our blog website.</p>
<h5>Using pm2 to manage process</h5>
<p>Strapi recommends you use <a href="https://github.com/Unitech/pm2/">pm2</a> to help manage Strapi process. We will be doing this by</p>
<ol>
<li>Install pm2 as a dependency<pre class="hljs"><code>npm i pm2
</code></pre>
</li>
<li>Create <code>server.js</code> file.<pre class="hljs"><code><span class="hljs-comment">// ./server.js</span>
<span class="hljs-keyword">const</span> strapi = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;@strapi/strapi&#x27;</span>);
<span class="hljs-title function_">strapi</span>().<span class="hljs-title function_">start</span>();
</code></pre>
</li>
<li>Create <code>ecosystem.config.js</code> by yourself or <code>pm2 init</code> (if you have installed pm2 globally)<pre class="hljs"><code><span class="hljs-comment">// ./ecosystem.config.js</span>
<span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = {
  <span class="hljs-attr">apps</span>: [
    {
      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;app&quot;</span>,
      <span class="hljs-attr">script</span>: <span class="hljs-string">&quot;./server.js&quot;</span>,
      <span class="hljs-attr">instance</span>: <span class="hljs-string">&quot;max&quot;</span>,
      <span class="hljs-attr">exec_moode</span>: <span class="hljs-string">&quot;cluster&quot;</span>,
      <span class="hljs-attr">env_production</span>: {
        <span class="hljs-attr">NODE_ENV</span>: <span class="hljs-string">&quot;production&quot;</span>,
      },
    },
  ],
};
</code></pre>
If you wonder what is all these configs please visit <a href="https://pm2.keymetrics.io/docs/usage/application-declaration/">pm2 doc</a></li>
<li>Edit <code>package.json</code> by changing <code>start</code> command.<pre class="hljs"><code><span class="hljs-attr">&quot;scripts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">{</span>
...<span class="hljs-punctuation">,</span>
<span class="hljs-attr">&quot;start&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;pm2-runtime start ecosystem.config.js --env production&quot;</span><span class="hljs-punctuation">,</span>
...
<span class="hljs-punctuation">}</span><span class="hljs-punctuation">,</span>
</code></pre>
</li>
</ol>
<p>Now, If you commit and push these additions to Heroku or Render, you should see some <code>PM2 log</code> in logs.</p>
<h3>Conclusion</h3>
<p>Hooray! Now, you have a CMS ready for your personal blog and already online on Heroku/Render Server. If you have any question please comment below or <a href="/TanatBlog/contact">contact me</a>, and be sure to check <a href="https://docs.strapi.io/developer-docs/latest/getting-started/introduction.html">Strapi Docs</a>, <a href="https://pm2.keymetrics.io/docs/usage/quick-start/">pm2 Docs</a>, and <a href="https://github.com/RiwEZ/TanatBlogCMS">source code on Github</a> first.</p>
<!-- HTML_TAG_END -->
</article></div>

  <script src="https://utteranc.es/client.js" repo="RiwEZ/TanatBlog" issue-term="title" label="Comment" theme="icy-dark" crossorigin="anonymous" async></script></div></div>


		<script type="module" data-hydrate="min8q5">
		import { start } from "/TanatBlog/_app/start-8f8df77d.js";
		start({
			target: document.querySelector('[data-hydrate="min8q5"]').parentNode,
			paths: {"base":"/TanatBlog","assets":"/TanatBlog"},
			session: {},
			route: true,
			spa: false,
			trailing_slash: "never",
			hydrate: {
				status: 200,
				error: null,
				nodes: [
					import("/TanatBlog/_app/pages/__layout.svelte-db2e78be.js"),
						import("/TanatBlog/_app/pages/blog/_slug_.svelte-652a23ad.js")
				],
				params: {slug:"how-i-use-strapi-as-cms-for-this-blog"},
				routeId: "blog/[slug]"
			}
		});
	</script><script type="application/json" sveltekit:data-type="data" sveltekit:data-url="/TanatBlog/api/posts/how-i-use-strapi-as-cms-for-this-blog.json">{"status":200,"statusText":"","headers":{"content-type":"application/json; charset=utf-8"},"body":"{\"title\":\"How I use Strapi as CMS for this blog.\",\"description\":\"Using Strapi to create blog posts api endpoints and host it on Heroku or Render\",\"content\":\"*Note: This blog is heavily inspired by [this blog post from strapi](https://strapi.io/blog/how-to-create-a-blog-with-svelte-kit-strapi)*\\n\\n\\\\\\nToday, I'll tell you how I manage articles for this blog using [Strapi](https://strapi.io/) and hosting it via [Heroku](https://www.heroku.com/) and [Render](https://render.com/). \\n\\n### Prerequisite\\n- [NodeJs](https://nodejs.org/en/) and [NPM](https://www.npmjs.com/) installed on your machine.\\n- Some basic JavaScript and [Strapi](https://strapi.io/) knowledge.\\n\\n### Create Strapi Project\\nRun this command on an empty folder to create a Strapi project called `cms` and wait for Strapi to create itself.\\n```bash\\nnpx create-strapi-app cms --quickstart\\n```\\nIf Strapi hasn't run yet, use this command in `cms` folder.\\n```bash\\nnpm run develop\\n```\\nNow, Strapi should start on [http://localhost:1337/](http://localhost:1337/) and show this signup page.\\n\\n\u003Cimg src=\\\"https://i.imgur.com/SnHWxRI.png\\\" alt=\\\"signup\\\" width=50%> \u003C/img>\\n\\nContinue by signing up and we should get to the Admin page.\\n\\n#### Creating content types\\nFind `Content-Type Builder` page and create new collection types `Post` with \\n- A `title` field with type `Text`\\n- A `description` field with type `Text` (`Short text` or `Long text` is up to you)\\n- A `content` field with `Rich Text` type\\n- A `slug` field with `UID` type and attached to `title` \\n\\nWe are using Strapi for our personal blog so no need for any `Relation` between user and article.\\n![content types](https://i.imgur.com/V809v5X.png)\\n\\n#### Setting up roles and permissions\\nFirst, find `Settings` button on sidebar then click on `Roles` in `USERS & PERMISSIONS PLUGIN` section. Next, select `Public` role and edit permissions of `Post` to only allow `findOne` and `find`.\\n![permisson](https://i.imgur.com/0ybGQuN.png)\\n\\nAfter we finished setting up permissions, try adding some test data on `Content Manger`. Now, we should be able to use [http://localhost:1337/api/post](http://localhost:1337/api/post)  and see the test data we put in.\\n\\n### Hosting\\nStrapi has a guide for many hosting platforms for you to select. (see. [Strapi Deployment](https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/deployment.html)).\\n\\nI have tried hosting on [Heroku](https://dashboard.heroku.com/) and [Render](https://render.com/) and I think both platforms is good to host a Strapi for our blog so I'll tell you how I host my Strapi with both platforms.\\n\\n#### Hosting on Heroku\\nJust follow [Strapi Heroku Deployment](https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/deployment/hosting-guides/heroku.html#heroku-install-requirements) and you should have Strapi up on Heroku server.\\n\\n#### Hosting on Render\\nYou can explore your options in this [article from Render](https://render.com/docs/deploy-strapi). For me, I'm going to use an \\\"Optimize for Cost and Simplicity\\\" option because it's simple, inexpensive and I think I don't need any scaling or zero downtime deploys thing. (*Note that if you want to try the same way with me, you need to at least pay for starter plan.*)\\n\\\\\\n**Configuration steps.**\\n1. Create Render Blueprint by creating file `render.yaml`.\\n\\t```yaml\\n\\t# ./render.yaml\\n\\tservices:\\n\\t  - type: web\\n\\t    name: strapi\\n\\t    env: node\\n\\t    region: singapore # optional\\n\\t    plan: starter # need to be at least starter for persistent disk\\n\\t    buildCommand: npm install && npm run build\\n\\t    startCommand: rsync -a public/ /data/public/ && npm run start\\n\\t    healthCheckPath: /_health\\n\\t    disk:\\n\\t      name: strapi-data\\n\\t      mountPath: /data\\n\\t      sizeGB: 1\\n\\t    envVars:\\n\\t      - key: NODE_VERSION\\n\\t        value: ~16.13.0\\n\\t      - key: NODE_ENV\\n\\t        value: production\\n\\t      - key: DATABASE_FILENAME\\n\\t        value: /data/strapi.db\\n\\t      - key: JWT_SECRET\\n\\t        generateValue: true\\n\\t      - key: ADMIN_JWT_SECRET\\n\\t        generateValue: true\\n\\t      - key: APP_KEYS\\n\\t        generateValue: true\\n\\t```\\n\\tIn build and start command you can use yarn instead of npm, if you want.\\n2. Add `./config/env/production/server.js` file.\\n\\t```js\\n\\t// ./config/env/production/server.js\\n\\tmodule.exports = ({ env }) => ({\\n\\t\\turl: env(\\\"RENDER_EXTERNAL_URL\\\"),\\n\\t\\tdirs: {\\n\\t\\tpublic: \\\"/data/public\\\"\\n\\t\\t},\\n\\t});\\n\\t```\\n3. Edit `./config/database.js` file.\\n\\t```js\\n\\t// ./config/database.js\\n\\tconst path = require('path');\\n\\t\\n\\tmodule.exports = ({ env }) => ({\\n\\t  connection: {\\n\\t    client: 'sqlite',\\n\\t    connection: {\\n\\t\\t    // filename: path.join(__dirname, '..', env('DATABASE_FILENAME', '.tmp/data.db')),\\n\\t\\t    filename: env('DATABASE_FILENAME', path.join(__dirname, '..', '.tmp/data.db')),\\n\\t    },\\n\\t    useNullAsDefault: true,\\n\\t  },\\n\\t});\\n\\n\\t```\\n4. Push your changes to GitHub or GitLab and [create an instance of your Blueprint](https://render.com/docs/infrastructure-as-code#getting-started) from the [Render dashboard](https://dashboard.render.com/).\\n\\nFinally, we should have Strapi up on Render server ready for our blog website.\\n\\n##### Using pm2 to manage process\\nStrapi recommends you use [pm2](https://github.com/Unitech/pm2/) to help manage Strapi process. We will be doing this by\\n1. Install pm2 as a dependency\\n\\t```\\n\\tnpm i pm2\\n\\t```\\n2. Create `server.js` file.\\n\\t```js\\n\\t// ./server.js\\n\\tconst strapi = require('@strapi/strapi');\\n\\tstrapi().start();\\n\\t```\\n3. Create `ecosystem.config.js` by yourself or `pm2 init` (if you have installed pm2 globally)\\n\\t```js \\n\\t// ./ecosystem.config.js\\n\\tmodule.exports = {\\n\\t  apps: [\\n\\t    {\\n\\t      name: \\\"app\\\",\\n\\t      script: \\\"./server.js\\\",\\n\\t      instance: \\\"max\\\",\\n\\t      exec_moode: \\\"cluster\\\",\\n\\t      env_production: {\\n\\t        NODE_ENV: \\\"production\\\",\\n\\t      },\\n\\t    },\\n\\t  ],\\n\\t};\\n\\t```\\n\\tIf you wonder what is all these configs please visit [pm2 doc](https://pm2.keymetrics.io/docs/usage/application-declaration/)\\n4. Edit `package.json` by changing `start` command.\\n\\t```json\\n\\t\\\"scripts\\\": {\\n\\t...,\\n    \\\"start\\\": \\\"pm2-runtime start ecosystem.config.js --env production\\\",\\n    ...\\n\\t},\\n\\t```\\n\\nNow, If you commit and push these additions to Heroku or Render, you should see some `PM2 log` in logs.\\n\\n### Conclusion\\nHooray! Now, you have a CMS ready for your personal blog and already online on Heroku/Render Server. If you have any question please comment below or [contact me](/TanatBlog/contact), and be sure to check [Strapi Docs](https://docs.strapi.io/developer-docs/latest/getting-started/introduction.html), [pm2 Docs](https://pm2.keymetrics.io/docs/usage/quick-start/), and [source code on Github](https://github.com/RiwEZ/TanatBlogCMS) first.\",\"createdAt\":\"2022-04-10T11:45:46.229Z\",\"updatedAt\":\"2022-04-10T11:45:46.229Z\",\"slug\":\"how-i-use-strapi-as-cms-for-this-blog\",\"htmlContent\":\"\u003Cp>\u003Cem>Note: This blog is heavily inspired by \u003Ca href=\\\"https://strapi.io/blog/how-to-create-a-blog-with-svelte-kit-strapi\\\">this blog post from strapi\u003C/a>\u003C/em>\u003C/p>\\n\u003Cp>\u003Cbr>\\nToday, I'll tell you how I manage articles for this blog using \u003Ca href=\\\"https://strapi.io/\\\">Strapi\u003C/a> and hosting it via \u003Ca href=\\\"https://www.heroku.com/\\\">Heroku\u003C/a> and \u003Ca href=\\\"https://render.com/\\\">Render\u003C/a>.\u003C/p>\\n\u003Ch3>Prerequisite\u003C/h3>\\n\u003Cul>\\n\u003Cli>\u003Ca href=\\\"https://nodejs.org/en/\\\">NodeJs\u003C/a> and \u003Ca href=\\\"https://www.npmjs.com/\\\">NPM\u003C/a> installed on your machine.\u003C/li>\\n\u003Cli>Some basic JavaScript and \u003Ca href=\\\"https://strapi.io/\\\">Strapi\u003C/a> knowledge.\u003C/li>\\n\u003C/ul>\\n\u003Ch3>Create Strapi Project\u003C/h3>\\n\u003Cp>Run this command on an empty folder to create a Strapi project called \u003Ccode>cms\u003C/code> and wait for Strapi to create itself.\u003C/p>\\n\u003Cpre class=\\\"hljs\\\">\u003Ccode>npx create-strapi-app cms --quickstart\\n\u003C/code>\u003C/pre>\\n\u003Cp>If Strapi hasn't run yet, use this command in \u003Ccode>cms\u003C/code> folder.\u003C/p>\\n\u003Cpre class=\\\"hljs\\\">\u003Ccode>npm run develop\\n\u003C/code>\u003C/pre>\\n\u003Cp>Now, Strapi should start on \u003Ca href=\\\"http://localhost:1337/\\\">http://localhost:1337/\u003C/a> and show this signup page.\u003C/p>\\n\u003Cp>\u003Cimg src=\\\"https://i.imgur.com/SnHWxRI.png\\\" alt=\\\"signup\\\" width=50%> \u003C/img>\u003C/p>\\n\u003Cp>Continue by signing up and we should get to the Admin page.\u003C/p>\\n\u003Ch4>Creating content types\u003C/h4>\\n\u003Cp>Find \u003Ccode>Content-Type Builder\u003C/code> page and create new collection types \u003Ccode>Post\u003C/code> with\u003C/p>\\n\u003Cul>\\n\u003Cli>A \u003Ccode>title\u003C/code> field with type \u003Ccode>Text\u003C/code>\u003C/li>\\n\u003Cli>A \u003Ccode>description\u003C/code> field with type \u003Ccode>Text\u003C/code> (\u003Ccode>Short text\u003C/code> or \u003Ccode>Long text\u003C/code> is up to you)\u003C/li>\\n\u003Cli>A \u003Ccode>content\u003C/code> field with \u003Ccode>Rich Text\u003C/code> type\u003C/li>\\n\u003Cli>A \u003Ccode>slug\u003C/code> field with \u003Ccode>UID\u003C/code> type and attached to \u003Ccode>title\u003C/code>\u003C/li>\\n\u003C/ul>\\n\u003Cp>We are using Strapi for our personal blog so no need for any \u003Ccode>Relation\u003C/code> between user and article.\u003Cbr>\\n\u003Cimg src=\\\"https://i.imgur.com/V809v5X.png\\\" alt=\\\"content types\\\">\u003C/p>\\n\u003Ch4>Setting up roles and permissions\u003C/h4>\\n\u003Cp>First, find \u003Ccode>Settings\u003C/code> button on sidebar then click on \u003Ccode>Roles\u003C/code> in \u003Ccode>USERS &amp; PERMISSIONS PLUGIN\u003C/code> section. Next, select \u003Ccode>Public\u003C/code> role and edit permissions of \u003Ccode>Post\u003C/code> to only allow \u003Ccode>findOne\u003C/code> and \u003Ccode>find\u003C/code>.\u003Cbr>\\n\u003Cimg src=\\\"https://i.imgur.com/0ybGQuN.png\\\" alt=\\\"permisson\\\">\u003C/p>\\n\u003Cp>After we finished setting up permissions, try adding some test data on \u003Ccode>Content Manger\u003C/code>. Now, we should be able to use \u003Ca href=\\\"http://localhost:1337/api/post\\\">http://localhost:1337/api/post\u003C/a>  and see the test data we put in.\u003C/p>\\n\u003Ch3>Hosting\u003C/h3>\\n\u003Cp>Strapi has a guide for many hosting platforms for you to select. (see. \u003Ca href=\\\"https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/deployment.html\\\">Strapi Deployment\u003C/a>).\u003C/p>\\n\u003Cp>I have tried hosting on \u003Ca href=\\\"https://dashboard.heroku.com/\\\">Heroku\u003C/a> and \u003Ca href=\\\"https://render.com/\\\">Render\u003C/a> and I think both platforms is good to host a Strapi for our blog so I'll tell you how I host my Strapi with both platforms.\u003C/p>\\n\u003Ch4>Hosting on Heroku\u003C/h4>\\n\u003Cp>Just follow \u003Ca href=\\\"https://docs.strapi.io/developer-docs/latest/setup-deployment-guides/deployment/hosting-guides/heroku.html#heroku-install-requirements\\\">Strapi Heroku Deployment\u003C/a> and you should have Strapi up on Heroku server.\u003C/p>\\n\u003Ch4>Hosting on Render\u003C/h4>\\n\u003Cp>You can explore your options in this \u003Ca href=\\\"https://render.com/docs/deploy-strapi\\\">article from Render\u003C/a>. For me, I'm going to use an &quot;Optimize for Cost and Simplicity&quot; option because it's simple, inexpensive and I think I don't need any scaling or zero downtime deploys thing. (\u003Cem>Note that if you want to try the same way with me, you need to at least pay for starter plan.\u003C/em>)\u003Cbr>\\n\u003Cbr>\\n\u003Cstrong>Configuration steps.\u003C/strong>\u003C/p>\\n\u003Col>\\n\u003Cli>Create Render Blueprint by creating file \u003Ccode>render.yaml\u003C/code>.\u003Cpre class=\\\"hljs\\\">\u003Ccode>\u003Cspan class=\\\"hljs-comment\\\"># ./render.yaml\u003C/span>\\n\u003Cspan class=\\\"hljs-attr\\\">services:\u003C/span>\\n  \u003Cspan class=\\\"hljs-bullet\\\">-\u003C/span> \u003Cspan class=\\\"hljs-attr\\\">type:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">web\u003C/span>\\n    \u003Cspan class=\\\"hljs-attr\\\">name:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">strapi\u003C/span>\\n    \u003Cspan class=\\\"hljs-attr\\\">env:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">node\u003C/span>\\n    \u003Cspan class=\\\"hljs-attr\\\">region:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">singapore\u003C/span> \u003Cspan class=\\\"hljs-comment\\\"># optional\u003C/span>\\n    \u003Cspan class=\\\"hljs-attr\\\">plan:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">starter\u003C/span> \u003Cspan class=\\\"hljs-comment\\\"># need to be at least starter for persistent disk\u003C/span>\\n    \u003Cspan class=\\\"hljs-attr\\\">buildCommand:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">npm\u003C/span> \u003Cspan class=\\\"hljs-string\\\">install\u003C/span> \u003Cspan class=\\\"hljs-string\\\">&amp;&amp;\u003C/span> \u003Cspan class=\\\"hljs-string\\\">npm\u003C/span> \u003Cspan class=\\\"hljs-string\\\">run\u003C/span> \u003Cspan class=\\\"hljs-string\\\">build\u003C/span>\\n    \u003Cspan class=\\\"hljs-attr\\\">startCommand:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">rsync\u003C/span> \u003Cspan class=\\\"hljs-string\\\">-a\u003C/span> \u003Cspan class=\\\"hljs-string\\\">public/\u003C/span> \u003Cspan class=\\\"hljs-string\\\">/data/public/\u003C/span> \u003Cspan class=\\\"hljs-string\\\">&amp;&amp;\u003C/span> \u003Cspan class=\\\"hljs-string\\\">npm\u003C/span> \u003Cspan class=\\\"hljs-string\\\">run\u003C/span> \u003Cspan class=\\\"hljs-string\\\">start\u003C/span>\\n    \u003Cspan class=\\\"hljs-attr\\\">healthCheckPath:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">/_health\u003C/span>\\n    \u003Cspan class=\\\"hljs-attr\\\">disk:\u003C/span>\\n      \u003Cspan class=\\\"hljs-attr\\\">name:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">strapi-data\u003C/span>\\n      \u003Cspan class=\\\"hljs-attr\\\">mountPath:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">/data\u003C/span>\\n      \u003Cspan class=\\\"hljs-attr\\\">sizeGB:\u003C/span> \u003Cspan class=\\\"hljs-number\\\">1\u003C/span>\\n    \u003Cspan class=\\\"hljs-attr\\\">envVars:\u003C/span>\\n      \u003Cspan class=\\\"hljs-bullet\\\">-\u003C/span> \u003Cspan class=\\\"hljs-attr\\\">key:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">NODE_VERSION\u003C/span>\\n        \u003Cspan class=\\\"hljs-attr\\\">value:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">~16.13.0\u003C/span>\\n      \u003Cspan class=\\\"hljs-bullet\\\">-\u003C/span> \u003Cspan class=\\\"hljs-attr\\\">key:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">NODE_ENV\u003C/span>\\n        \u003Cspan class=\\\"hljs-attr\\\">value:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">production\u003C/span>\\n      \u003Cspan class=\\\"hljs-bullet\\\">-\u003C/span> \u003Cspan class=\\\"hljs-attr\\\">key:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">DATABASE_FILENAME\u003C/span>\\n        \u003Cspan class=\\\"hljs-attr\\\">value:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">/data/strapi.db\u003C/span>\\n      \u003Cspan class=\\\"hljs-bullet\\\">-\u003C/span> \u003Cspan class=\\\"hljs-attr\\\">key:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">JWT_SECRET\u003C/span>\\n        \u003Cspan class=\\\"hljs-attr\\\">generateValue:\u003C/span> \u003Cspan class=\\\"hljs-literal\\\">true\u003C/span>\\n      \u003Cspan class=\\\"hljs-bullet\\\">-\u003C/span> \u003Cspan class=\\\"hljs-attr\\\">key:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">ADMIN_JWT_SECRET\u003C/span>\\n        \u003Cspan class=\\\"hljs-attr\\\">generateValue:\u003C/span> \u003Cspan class=\\\"hljs-literal\\\">true\u003C/span>\\n      \u003Cspan class=\\\"hljs-bullet\\\">-\u003C/span> \u003Cspan class=\\\"hljs-attr\\\">key:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">APP_KEYS\u003C/span>\\n        \u003Cspan class=\\\"hljs-attr\\\">generateValue:\u003C/span> \u003Cspan class=\\\"hljs-literal\\\">true\u003C/span>\\n\u003C/code>\u003C/pre>\\nIn build and start command you can use yarn instead of npm, if you want.\u003C/li>\\n\u003Cli>Add \u003Ccode>./config/env/production/server.js\u003C/code> file.\u003Cpre class=\\\"hljs\\\">\u003Ccode>\u003Cspan class=\\\"hljs-comment\\\">// ./config/env/production/server.js\u003C/span>\\n\u003Cspan class=\\\"hljs-variable language_\\\">module\u003C/span>.\u003Cspan class=\\\"hljs-property\\\">exports\u003C/span> = \u003Cspan class=\\\"hljs-function\\\">(\u003Cspan class=\\\"hljs-params\\\">{ env }\u003C/span>) =&gt;\u003C/span> ({\\n\\t\u003Cspan class=\\\"hljs-attr\\\">url\u003C/span>: \u003Cspan class=\\\"hljs-title function_\\\">env\u003C/span>(\u003Cspan class=\\\"hljs-string\\\">&quot;RENDER_EXTERNAL_URL&quot;\u003C/span>),\\n\\t\u003Cspan class=\\\"hljs-attr\\\">dirs\u003C/span>: {\\n\\t\u003Cspan class=\\\"hljs-attr\\\">public\u003C/span>: \u003Cspan class=\\\"hljs-string\\\">&quot;/data/public&quot;\u003C/span>\\n\\t},\\n});\\n\u003C/code>\u003C/pre>\\n\u003C/li>\\n\u003Cli>Edit \u003Ccode>./config/database.js\u003C/code> file.\u003Cpre class=\\\"hljs\\\">\u003Ccode>\u003Cspan class=\\\"hljs-comment\\\">// ./config/database.js\u003C/span>\\n\u003Cspan class=\\\"hljs-keyword\\\">const\u003C/span> path = \u003Cspan class=\\\"hljs-built_in\\\">require\u003C/span>(\u003Cspan class=\\\"hljs-string\\\">&#x27;path&#x27;\u003C/span>);\\n\\n\u003Cspan class=\\\"hljs-variable language_\\\">module\u003C/span>.\u003Cspan class=\\\"hljs-property\\\">exports\u003C/span> = \u003Cspan class=\\\"hljs-function\\\">(\u003Cspan class=\\\"hljs-params\\\">{ env }\u003C/span>) =&gt;\u003C/span> ({\\n  \u003Cspan class=\\\"hljs-attr\\\">connection\u003C/span>: {\\n    \u003Cspan class=\\\"hljs-attr\\\">client\u003C/span>: \u003Cspan class=\\\"hljs-string\\\">&#x27;sqlite&#x27;\u003C/span>,\\n    \u003Cspan class=\\\"hljs-attr\\\">connection\u003C/span>: {\\n\\t    \u003Cspan class=\\\"hljs-comment\\\">// filename: path.join(__dirname, &#x27;..&#x27;, env(&#x27;DATABASE_FILENAME&#x27;, &#x27;.tmp/data.db&#x27;)),\u003C/span>\\n\\t    \u003Cspan class=\\\"hljs-attr\\\">filename\u003C/span>: \u003Cspan class=\\\"hljs-title function_\\\">env\u003C/span>(\u003Cspan class=\\\"hljs-string\\\">&#x27;DATABASE_FILENAME&#x27;\u003C/span>, path.\u003Cspan class=\\\"hljs-title function_\\\">join\u003C/span>(__dirname, \u003Cspan class=\\\"hljs-string\\\">&#x27;..&#x27;\u003C/span>, \u003Cspan class=\\\"hljs-string\\\">&#x27;.tmp/data.db&#x27;\u003C/span>)),\\n    },\\n    \u003Cspan class=\\\"hljs-attr\\\">useNullAsDefault\u003C/span>: \u003Cspan class=\\\"hljs-literal\\\">true\u003C/span>,\\n  },\\n});\\n\\n\u003C/code>\u003C/pre>\\n\u003C/li>\\n\u003Cli>Push your changes to GitHub or GitLab and \u003Ca href=\\\"https://render.com/docs/infrastructure-as-code#getting-started\\\">create an instance of your Blueprint\u003C/a> from the \u003Ca href=\\\"https://dashboard.render.com/\\\">Render dashboard\u003C/a>.\u003C/li>\\n\u003C/ol>\\n\u003Cp>Finally, we should have Strapi up on Render server ready for our blog website.\u003C/p>\\n\u003Ch5>Using pm2 to manage process\u003C/h5>\\n\u003Cp>Strapi recommends you use \u003Ca href=\\\"https://github.com/Unitech/pm2/\\\">pm2\u003C/a> to help manage Strapi process. We will be doing this by\u003C/p>\\n\u003Col>\\n\u003Cli>Install pm2 as a dependency\u003Cpre class=\\\"hljs\\\">\u003Ccode>npm i pm2\\n\u003C/code>\u003C/pre>\\n\u003C/li>\\n\u003Cli>Create \u003Ccode>server.js\u003C/code> file.\u003Cpre class=\\\"hljs\\\">\u003Ccode>\u003Cspan class=\\\"hljs-comment\\\">// ./server.js\u003C/span>\\n\u003Cspan class=\\\"hljs-keyword\\\">const\u003C/span> strapi = \u003Cspan class=\\\"hljs-built_in\\\">require\u003C/span>(\u003Cspan class=\\\"hljs-string\\\">&#x27;@strapi/strapi&#x27;\u003C/span>);\\n\u003Cspan class=\\\"hljs-title function_\\\">strapi\u003C/span>().\u003Cspan class=\\\"hljs-title function_\\\">start\u003C/span>();\\n\u003C/code>\u003C/pre>\\n\u003C/li>\\n\u003Cli>Create \u003Ccode>ecosystem.config.js\u003C/code> by yourself or \u003Ccode>pm2 init\u003C/code> (if you have installed pm2 globally)\u003Cpre class=\\\"hljs\\\">\u003Ccode>\u003Cspan class=\\\"hljs-comment\\\">// ./ecosystem.config.js\u003C/span>\\n\u003Cspan class=\\\"hljs-variable language_\\\">module\u003C/span>.\u003Cspan class=\\\"hljs-property\\\">exports\u003C/span> = {\\n  \u003Cspan class=\\\"hljs-attr\\\">apps\u003C/span>: [\\n    {\\n      \u003Cspan class=\\\"hljs-attr\\\">name\u003C/span>: \u003Cspan class=\\\"hljs-string\\\">&quot;app&quot;\u003C/span>,\\n      \u003Cspan class=\\\"hljs-attr\\\">script\u003C/span>: \u003Cspan class=\\\"hljs-string\\\">&quot;./server.js&quot;\u003C/span>,\\n      \u003Cspan class=\\\"hljs-attr\\\">instance\u003C/span>: \u003Cspan class=\\\"hljs-string\\\">&quot;max&quot;\u003C/span>,\\n      \u003Cspan class=\\\"hljs-attr\\\">exec_moode\u003C/span>: \u003Cspan class=\\\"hljs-string\\\">&quot;cluster&quot;\u003C/span>,\\n      \u003Cspan class=\\\"hljs-attr\\\">env_production\u003C/span>: {\\n        \u003Cspan class=\\\"hljs-attr\\\">NODE_ENV\u003C/span>: \u003Cspan class=\\\"hljs-string\\\">&quot;production&quot;\u003C/span>,\\n      },\\n    },\\n  ],\\n};\\n\u003C/code>\u003C/pre>\\nIf you wonder what is all these configs please visit \u003Ca href=\\\"https://pm2.keymetrics.io/docs/usage/application-declaration/\\\">pm2 doc\u003C/a>\u003C/li>\\n\u003Cli>Edit \u003Ccode>package.json\u003C/code> by changing \u003Ccode>start\u003C/code> command.\u003Cpre class=\\\"hljs\\\">\u003Ccode>\u003Cspan class=\\\"hljs-attr\\\">&quot;scripts&quot;\u003C/span>\u003Cspan class=\\\"hljs-punctuation\\\">:\u003C/span> \u003Cspan class=\\\"hljs-punctuation\\\">{\u003C/span>\\n...\u003Cspan class=\\\"hljs-punctuation\\\">,\u003C/span>\\n\u003Cspan class=\\\"hljs-attr\\\">&quot;start&quot;\u003C/span>\u003Cspan class=\\\"hljs-punctuation\\\">:\u003C/span> \u003Cspan class=\\\"hljs-string\\\">&quot;pm2-runtime start ecosystem.config.js --env production&quot;\u003C/span>\u003Cspan class=\\\"hljs-punctuation\\\">,\u003C/span>\\n...\\n\u003Cspan class=\\\"hljs-punctuation\\\">}\u003C/span>\u003Cspan class=\\\"hljs-punctuation\\\">,\u003C/span>\\n\u003C/code>\u003C/pre>\\n\u003C/li>\\n\u003C/ol>\\n\u003Cp>Now, If you commit and push these additions to Heroku or Render, you should see some \u003Ccode>PM2 log\u003C/code> in logs.\u003C/p>\\n\u003Ch3>Conclusion\u003C/h3>\\n\u003Cp>Hooray! Now, you have a CMS ready for your personal blog and already online on Heroku/Render Server. If you have any question please comment below or \u003Ca href=\\\"/TanatBlog/contact\\\">contact me\u003C/a>, and be sure to check \u003Ca href=\\\"https://docs.strapi.io/developer-docs/latest/getting-started/introduction.html\\\">Strapi Docs\u003C/a>, \u003Ca href=\\\"https://pm2.keymetrics.io/docs/usage/quick-start/\\\">pm2 Docs\u003C/a>, and \u003Ca href=\\\"https://github.com/RiwEZ/TanatBlogCMS\\\">source code on Github\u003C/a> first.\u003C/p>\\n\"}"}</script></div>
  </body>
</html>
