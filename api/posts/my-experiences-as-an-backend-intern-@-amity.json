{"data":{"title":"My Experiences As An Backend Intern @ Amity","description":"A very brief summary of my intern experience.","content":"Amity is currently referred to 2 companies, Amity Solution and Amity Technology. I worked on Amity Technology, which sells SDK and UI-Kit that provide social media features for customers' applications. You can check out the details of their product at [their website](https://www.amity.co/social-cloud).\n\\\nBasically, we provide building blocks and some finished components for the customer to implement their own social media on their applications. So they don't need to build any infrastructure by themselves and can have their own social media that they can manage themselves (no need to abide by the rules of big social media like Facebook or Twitter anymore) \n## So how was my work?\nMy day-to-day work looks like this\n1. Team standup:  talked with the team about what have I done yesterday, what will I do today, do some code review, problem discussion, and normal conversation.\n2. Squad standup: short talk with **Project Manager** about what have I done, how the progress of each task and is there any blocker needs to be discussed, sprint planning, and sprint retro.\n3. Any other meetings necessary in between \n4. The remaining time is me working on the Jira ticket that I need to do.\n\n\nAnd the works I do are mainly\n1. Developing a new feature.\n2. Fixing any bugs that customers raised or we've found\n3. Technical debts work such as dependencies update, improving unit test \n4. Any other miscellaneous tasks e.g. prepare for knowledge sharing session \n### The new technology that I learned\n![tech](https://imgur.com/CeBkIAn.png)\nI have little experience writing a backend in JS/TS (express ü§£) and I still don't think it's a good choice to write backend in JS/TS because we don't have **REAL** types and the performance improvement is kinda hard (it's garbage collected and memory management is kind of not exist at all right?). \n\\\nYeah, everything at Amity is written in JS/TS ü§¶‚Äç‚ôÇÔ∏è. And I have learned so many things about JS ecosystem on backend side such as\n- [MoleculerJs](https://moleculer.services/index.html) which is a microservice framework that includes almost anything you want.  Our core system is mainly implemented on this framework.\n- [CRACO](https://craco.js.org/) (‡≤†_‡≤†), create-react-app-configuration-override an upgraded version of create-react-app which is super slow lol.\n\n\nAnd there are also other things \n- [MongoDB](https://www.mongodb.com/), our main database. I have learned how to index the database, design a proper data schema, different types of MongoDB collections/operations etc.\n- [Redis](https://redis.io/), our main cache. I have learned how to use it, and different types of data structures in it.\n- AWS Services e.g. [AWS Eventbridge scheduler](https://aws.amazon.com/eventbridge/scheduler/), [AWS Lambda](https://aws.amazon.com/lambda/), [AWS SQS](https://aws.amazon.com/sqs/)\n- [Serverless Framework](https://www.serverless.com/), we can use this to deploy AWS services programmatically.\n- [Kubernetes](https://kubernetes.io/), which our core system is deployed using it. I only learned about how to use [k9s](https://k9scli.io/) to see logs and check out each pod.\n### Developing a new feature\nHow is feature developed on Amity?. I'll only talk about it on the backend engineer side by explaining how I developed *Post Impression* feature (but only a fraction of it).  \n![impression](https://i.imgur.com/tRrEkcj.png)\nSo first we get the requirements of the feature that we need to do. For *Post Impression* feature, for example\n- Definition: impression is non-unique count of users who have viewed the post\n- When user view a post, post impression should increase\n- User should be able to view the impression value on post\n(note that in reality, the requirements are much more detailed than this)\n\n\nAnd then we need to propose a planned solution of how we should implement this feature on the current system (we called it tech-spec). This spec should describe what will need to be added, what needs to change, and wheter is there any new infrastructure. The spec should also be detailed as much as possible so the lead engineer and system architect can understand it completely and give a review. \n\n\\\nFor example, we will first draw the overall architecture diagram like the picture below and then explain what does each part do\n- User will need to first send a request to increase the post impression, then`moleculer service #1` will check for user's quota and send it to the `SQS #1`.\n- `moleculer service #2` will then poll a batch from the `SQS #1`, process the batch (check user's permission, etc.) and then send it to the next `SQS #2`.\n- The lambda will then poll a batch from the `SQS #2`, count the impression value and insert the unique view activity to a new MongoDB instance for this feature. Then it will call an internal API to update the impression value on core system.\n- `SQS #1` and `SQS #2` are used to make the load steady on `moleculer service #2` and the lambda. \nNote: This is a super simplified example (‚òûÔæü„ÉÆÔæü)‚òû\n\n![techspec](https://i.imgur.com/DJPYoEr.png)\n\nWhen the tech-spec is finished, we will start implementing which should be easy if the tech-spec is detailed enough and we don't encounter some weird problem. Then we do the testing (both by myself and QA team). If everything is okay, we will release it üéâ‚ú®\n\n### Some interesting problems\nThis section is about the problems that the backend team or I encounter and I found it interesting to talk about.\n##### Memory Leak\nYep, on one release suddenly the memory of production service exceeds a threshold and an alert is sent to the team. It was a disaster üòÇ, because no one knows how it happened. I didn't have a chance to be involved in fixing this issue that much but what I found is profiling a NodeJS application is hard as hell (or it's because we lack the skill to do it). When we have so many libraries that are in use at the same time, it's just too much information to filter. And JS/TS code is hard to be memory safe or efficient because the language is just not building for this use case.\n\n\\\nI think the main takeaway is, that if we use other languages like Rust, Go or Elixir this can still happen but fixing it should be much easier (especially on Rust because we can just look at the code). Well, I'm thinking about doing a comparison between these languages to check if this is true or not.\n##### Moleculer Serialization\n![moleculer](https://i.imgur.com/Vgpd254.png)\nI wasted like 2 days, confused about why I can't pass `Map` between services in moleculer (we use native JSON serializer). Remember this, you need to read the documents üòÇ.\n##### The config hell\nWith the help of tools like Serverless or Terraform, configuration is easier but we can still mess it up and some things still need to be manually edited. So, remember to recheck your configuration or you could possibly mess up the prod service (hopefully you have some automated check ü§∑‚Äç‚ôÇÔ∏è)\n## Conclusion (and some opinions)\nI've learned so much from working as a backend intern at Amity both the programming side and social side. My colleagues were all super nice and friendly, and the work is ok (I don't like JS/TS, so the work is not that fun ü§£), some takeaways that I can think of \n- Try to always learn about new technology so you can think of a wide variety of solutions.\n- Design a system that will work with the smallest cost (both money and time) as possible.\n- Surprising thing: you don't need to have a computer science/engineer background to work as a QA or Engineer.\n- Team's proficiency needs to be considered when choosing the tech stack (but I also think that there's a threshold that we need to move on to better tech e.g. ditch the JS)","htmlContent":"<p>Amity is currently referred to 2 companies, Amity Solution and Amity Technology. I worked on Amity Technology, which sells SDK and UI-Kit that provide social media features for customers' applications. You can check out the details of their product at <a href=\"https://www.amity.co/social-cloud\">their website</a>.<br>\n<br>\nBasically, we provide building blocks and some finished components for the customer to implement their own social media on their applications. So they don't need to build any infrastructure by themselves and can have their own social media that they can manage themselves (no need to abide by the rules of big social media like Facebook or Twitter anymore)</p>\n<h2>So how was my work?</h2>\n<p>My day-to-day work looks like this</p>\n<ol>\n<li>Team standup:  talked with the team about what have I done yesterday, what will I do today, do some code review, problem discussion, and normal conversation.</li>\n<li>Squad standup: short talk with <strong>Project Manager</strong> about what have I done, how the progress of each task and is there any blocker needs to be discussed, sprint planning, and sprint retro.</li>\n<li>Any other meetings necessary in between</li>\n<li>The remaining time is me working on the Jira ticket that I need to do.</li>\n</ol>\n<p>And the works I do are mainly</p>\n<ol>\n<li>Developing a new feature.</li>\n<li>Fixing any bugs that customers raised or we've found</li>\n<li>Technical debts work such as dependencies update, improving unit test</li>\n<li>Any other miscellaneous tasks e.g. prepare for knowledge sharing session</li>\n</ol>\n<h3>The new technology that I learned</h3>\n<p><img src=\"https://imgur.com/CeBkIAn.png\" alt=\"tech\"><br>\nI have little experience writing a backend in JS/TS (express ü§£) and I still don't think it's a good choice to write backend in JS/TS because we don't have <strong>REAL</strong> types and the performance improvement is kinda hard (it's garbage collected and memory management is kind of not exist at all right?).<br>\n<br>\nYeah, everything at Amity is written in JS/TS ü§¶‚Äç‚ôÇÔ∏è. And I have learned so many things about JS ecosystem on backend side such as</p>\n<ul>\n<li><a href=\"https://moleculer.services/index.html\">MoleculerJs</a> which is a microservice framework that includes almost anything you want.  Our core system is mainly implemented on this framework.</li>\n<li><a href=\"https://craco.js.org/\">CRACO</a> (‡≤†_‡≤†), create-react-app-configuration-override an upgraded version of create-react-app which is super slow lol.</li>\n</ul>\n<p>And there are also other things</p>\n<ul>\n<li><a href=\"https://www.mongodb.com/\">MongoDB</a>, our main database. I have learned how to index the database, design a proper data schema, different types of MongoDB collections/operations etc.</li>\n<li><a href=\"https://redis.io/\">Redis</a>, our main cache. I have learned how to use it, and different types of data structures in it.</li>\n<li>AWS Services e.g. <a href=\"https://aws.amazon.com/eventbridge/scheduler/\">AWS Eventbridge scheduler</a>, <a href=\"https://aws.amazon.com/lambda/\">AWS Lambda</a>, <a href=\"https://aws.amazon.com/sqs/\">AWS SQS</a></li>\n<li><a href=\"https://www.serverless.com/\">Serverless Framework</a>, we can use this to deploy AWS services programmatically.</li>\n<li><a href=\"https://kubernetes.io/\">Kubernetes</a>, which our core system is deployed using it. I only learned about how to use <a href=\"https://k9scli.io/\">k9s</a> to see logs and check out each pod.</li>\n</ul>\n<h3>Developing a new feature</h3>\n<p>How is feature developed on Amity?. I'll only talk about it on the backend engineer side by explaining how I developed <em>Post Impression</em> feature (but only a fraction of it).<br>\n<img src=\"https://i.imgur.com/tRrEkcj.png\" alt=\"impression\"><br>\nSo first we get the requirements of the feature that we need to do. For <em>Post Impression</em> feature, for example</p>\n<ul>\n<li>Definition: impression is non-unique count of users who have viewed the post</li>\n<li>When user view a post, post impression should increase</li>\n<li>User should be able to view the impression value on post<br>\n(note that in reality, the requirements are much more detailed than this)</li>\n</ul>\n<p>And then we need to propose a planned solution of how we should implement this feature on the current system (we called it tech-spec). This spec should describe what will need to be added, what needs to change, and wheter is there any new infrastructure. The spec should also be detailed as much as possible so the lead engineer and system architect can understand it completely and give a review.</p>\n<p><br>\nFor example, we will first draw the overall architecture diagram like the picture below and then explain what does each part do</p>\n<ul>\n<li>User will need to first send a request to increase the post impression, then<code>moleculer service #1</code> will check for user's quota and send it to the <code>SQS #1</code>.</li>\n<li><code>moleculer service #2</code> will then poll a batch from the <code>SQS #1</code>, process the batch (check user's permission, etc.) and then send it to the next <code>SQS #2</code>.</li>\n<li>The lambda will then poll a batch from the <code>SQS #2</code>, count the impression value and insert the unique view activity to a new MongoDB instance for this feature. Then it will call an internal API to update the impression value on core system.</li>\n<li><code>SQS #1</code> and <code>SQS #2</code> are used to make the load steady on <code>moleculer service #2</code> and the lambda.<br>\nNote: This is a super simplified example (‚òûÔæü„ÉÆÔæü)‚òû</li>\n</ul>\n<p><img src=\"https://i.imgur.com/DJPYoEr.png\" alt=\"techspec\"></p>\n<p>When the tech-spec is finished, we will start implementing which should be easy if the tech-spec is detailed enough and we don't encounter some weird problem. Then we do the testing (both by myself and QA team). If everything is okay, we will release it üéâ‚ú®</p>\n<h3>Some interesting problems</h3>\n<p>This section is about the problems that the backend team or I encounter and I found it interesting to talk about.</p>\n<h5>Memory Leak</h5>\n<p>Yep, on one release suddenly the memory of production service exceeds a threshold and an alert is sent to the team. It was a disaster üòÇ, because no one knows how it happened. I didn't have a chance to be involved in fixing this issue that much but what I found is profiling a NodeJS application is hard as hell (or it's because we lack the skill to do it). When we have so many libraries that are in use at the same time, it's just too much information to filter. And JS/TS code is hard to be memory safe or efficient because the language is just not building for this use case.</p>\n<p><br>\nI think the main takeaway is, that if we use other languages like Rust, Go or Elixir this can still happen but fixing it should be much easier (especially on Rust because we can just look at the code). Well, I'm thinking about doing a comparison between these languages to check if this is true or not.</p>\n<h5>Moleculer Serialization</h5>\n<p><img src=\"https://i.imgur.com/Vgpd254.png\" alt=\"moleculer\"><br>\nI wasted like 2 days, confused about why I can't pass <code>Map</code> between services in moleculer (we use native JSON serializer). Remember this, you need to read the documents üòÇ.</p>\n<h5>The config hell</h5>\n<p>With the help of tools like Serverless or Terraform, configuration is easier but we can still mess it up and some things still need to be manually edited. So, remember to recheck your configuration or you could possibly mess up the prod service (hopefully you have some automated check ü§∑‚Äç‚ôÇÔ∏è)</p>\n<h2>Conclusion (and some opinions)</h2>\n<p>I've learned so much from working as a backend intern at Amity both the programming side and social side. My colleagues were all super nice and friendly, and the work is ok (I don't like JS/TS, so the work is not that fun ü§£), some takeaways that I can think of</p>\n<ul>\n<li>Try to always learn about new technology so you can think of a wide variety of solutions.</li>\n<li>Design a system that will work with the smallest cost (both money and time) as possible.</li>\n<li>Surprising thing: you don't need to have a computer science/engineer background to work as a QA or Engineer.</li>\n<li>Team's proficiency needs to be considered when choosing the tech stack (but I also think that there's a threshold that we need to move on to better tech e.g. ditch the JS)</li>\n</ul>\n","slug":"my-experiences-as-an-backend-intern-@-amity","createdAt":"2023-11-04T15:18:07.118Z","updatedAt":"2023-11-04T15:24:37.716Z"}}